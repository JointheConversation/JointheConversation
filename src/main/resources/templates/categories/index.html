<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html"
      lang="en">

    <head th:replace="fragments/header :: header('Choose a category')"></head>
    <body>
    <nav th:replace="fragments/navbar::navbar"></nav>
    <h2>Conversations</h2>
    <div th:replace="fragments/footer::jQuery"></div>

    <div class="cat-slider">
        <div class="row">
        <ul>
            <a th:each="category:${categories}" th:href="@{'/categories/'+ ${category.title}+'/threads'}"><div class="col-xs-4 col-md-2 team-circle" ><li class="team-lable" th:text="${category.title}"></li></div></a>
        </ul>
    </div>
    </div>



    <!--iterates through data base, for each "category" display the title, then link there.-->
    <!--<div class="categories-index">-->
        <!--<tr th:each="category:${categories}" >-->
            <!--<td th:text="${category.title}"></td>-->
            <!--<a th:href="@{'/category/'+ ${category.title}}"></a></tr>-->
    <!--</div>-->


    <!--<div th:href="@{/category.title(title='category 1')}">Category 1</div>-->
    <!--<div th:href="@{/category.title(title='category 2')}">Category 2</div>-->
    <!--<div th:href="@{/category.title(title='category 3')}">Category 3</div>-->
    <!--<div th:href="@{/category.title(title='category 4')}">Category 4</div>-->
    <!--<div th:href="@{/category.title(title='category 5')}">Category 5</div>-->
    <!--</div>-->


    <h5>Converstaion Closes</h5>
    <div id="clockdiv">
        <div>
            <span class="hours"></span>
            <div class="smalltext">Hours</div>
        </div>
        <div>
            <span class="minutes"></span>
            <div class="smalltext">Minutes</div>
        </div>
        <div>
            <span class="seconds"></span>
            <div class="smalltext">Seconds</div>
        </div>
    </div>

    <footer th:include="fragments/footer :: footer"></footer>

    <script>
        //<![CDATA[
        function getTimeRemaining(endtime) {
            var t = Date.parse(endtime) - Date.parse(new Date());
            var seconds = Math.floor((t / 1000) % 60);
            var minutes = Math.floor((t / 1000 / 60) % 60);
            var hours = Math.floor((t / (1000 * 60 * 60)) % 12);
            return {
                'total': t,
                'hours': hours,
                'minutes': minutes,
                'seconds': seconds
            };
        }

        function initializeClock(id, endtime) {
            var clock = document.getElementById(id);
            var hoursSpan = clock.querySelector('.hours');
            var minutesSpan = clock.querySelector('.minutes');
            var secondsSpan = clock.querySelector('.seconds');

            function updateClock() {
                var t = getTimeRemaining(endtime);

                hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
                minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
                secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

                if (t.total <= 0) {
                    clearInterval(timeinterval);
                }
            }

            updateClock();
            var timeinterval = setInterval(updateClock, 1000);
        }

        var deadline = new Date(Date.parse(new Date()) + 24 * 60 * 60 * 1000);
        initializeClock('clockdiv', deadline);
        //]]>
    </script>
    </body>


</html>
